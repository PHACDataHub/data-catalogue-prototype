<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title> <!-- Title will be set dynamically -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Icons Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        crossorigin="anonymous">
    <link rel="icon" type="image/x-icon" sizes="96x96" href="favicon.ico">
    <link rel="stylesheet" href="custom.css">

    <!-- GC Design System -->
    <link rel="stylesheet"
        href="https://cdn.design-system.alpha.canada.ca/@cdssnc/gcds-components@latest/dist/gcds/gcds.css">
    <script type="module"
        src="https://cdn.design-system.alpha.canada.ca/@cdssnc/gcds-components@latest/dist/gcds/gcds.esm.js"></script>
    <script nomodule
        src="https://cdn.design-system.alpha.canada.ca/@cdssnc/gcds-components@latest/dist/gcds/gcds.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>

</head>

<body>
    <!-- Assign an ID to the prototype notice div -->
    <div id="prototype-notice"
        style="display:block; width:100%; background-color:#ff5733; text-align:center; font-size:20px; padding:0.5em; font-weight:bold">
        <!-- Prototype notice will be set dynamically -->
    </div>

    <!-- GC Design System Header -->
    <gcds-header lang-href="#" skip-to-href="#main-content" lang-code="">
    </gcds-header>

    <div class="content-wrapper" id="main-content">
        <main id="mc" class="general-layout">
            <section>
                <article class="h1-dark text-light">
                    <h1 class="mb-400" id="page-title">
                        Data Dictionary
                    </h1>
                    <p class="mb-400" id="intro-text">
                        <!-- Intro text will be set dynamically -->
                    </p>
                    <a class="link-light more-info-link" href="#">
                        <!-- Link text will be set dynamically -->
                    </a>
                </article>
            </section>

            <table id="data-dictionary-table">
                <thead>
                  <tr>
                    <th>Field Name</th>
                    <th>Label</th>
                    <th>Data Type</th>
                    <th>Description</th>
                    <th>Constraints</th>
                    <th>Example</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Rows will be inserted here dynamically -->
                </tbody>
              </table>

            <script>
                fetch('data-dictionary.json')
                    .then(response => response.json())
                    .then(data => {
                        const tableBody = document.querySelector('#data-dictionary-table tbody');
                        data.fields.forEach(field => {
                            const row = document.createElement('tr');
                            row.innerHTML = `
                                <td>${field.field_name}</td>
                                <td>${field.label}</td>
                                <td>${field.data_type}</td>
                                <td>${field.Fdescription}</td>
                                <td>${JSON.stringify(field.constraints)}</td>
                                <td>${Array.isArray(field.example) ? field.example.join(', ') : field.example}</td>
                            `;
                            tableBody.appendChild(row);
                        });
                    })
                    .catch(error => console.error('Error fetching data dictionary:', error));

            </script>
                
            </table>
            <section>
                <article class="py-450">
                    <div class="toggle-columns">
                        <span id="toggle-columns-label">
                            <!-- Label will be set dynamically -->
                        </span>
                        <!-- Toggle buttons will be generated dynamically -->
                    </div>
                </article>

                <article class="py-450">
                    <!-- DataTables Table -->
                    <table id="catalogueTable" class="table table-striped" style="width:100%">
                        <thead>
                            <tr>
                                <!-- Column headers will be set dynamically -->
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Data will be populated dynamically -->
                        </tbody>
                    </table>
                </article>
            </section>
        </main>
    </div>

    <!-- GC Design System Footer -->
    <gcds-footer display="full" contextual-heading="" contextual-links="">
    </gcds-footer>

    <!-- Bootstrap JS (Optional) -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>